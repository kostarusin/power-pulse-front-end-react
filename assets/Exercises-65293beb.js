import{h as T,x as b,r as p,j as e,L as W,u as q,i as F}from"./index-d0a0f542.js";import{B as M,M as z}from"./ButtonModal-0306bd1a.js";import{i as S}from"./icons-ab5d985a.js";const B=t=>t.exercises.loading,D=t=>t.exercises,U=()=>{const t=T(B),s=T(D);return{loading:t,exercises:s}};var R=typeof window>"u"?p.useEffect:p.useLayoutEffect,G=({isPlaying:t,duration:s,startAt:l=0,updateInterval:r=0,onComplete:c,onUpdate:n})=>{let[i,m]=p.useState(l),u=p.useRef(0),a=p.useRef(l),_=p.useRef(l*-1e3),o=p.useRef(null),h=p.useRef(null),y=p.useRef(null),k=v=>{let x=v/1e3;if(h.current===null){h.current=x,o.current=requestAnimationFrame(k);return}let g=x-h.current,j=u.current+g;h.current=x,u.current=j;let E=a.current+(r===0?j:(j/r|0)*r),$=a.current+j,C=typeof s=="number"&&$>=s;m(C?s:E),C||(o.current=requestAnimationFrame(k))},w=()=>{o.current&&cancelAnimationFrame(o.current),y.current&&clearTimeout(y.current),h.current=null},N=p.useCallback(v=>{w(),u.current=0;let x=typeof v=="number"?v:l;a.current=x,m(x),t&&(o.current=requestAnimationFrame(k))},[t,l]);return R(()=>{if(n==null||n(i),s&&i>=s){_.current+=s*1e3;let{shouldRepeat:v=!1,delay:x=0,newStartAt:g}=(c==null?void 0:c(_.current/1e3))||{};v&&(y.current=setTimeout(()=>N(g),x*1e3))}},[i,s]),R(()=>(t&&(o.current=requestAnimationFrame(k)),w),[t,s,r]),{elapsedTime:i,reset:N}},O=(t,s,l)=>{let r=t/2,c=s/2,n=r-c,i=2*n,m=l==="clockwise"?"1,0":"0,1",u=2*Math.PI*n;return{path:`m ${r},${c} a ${n},${n} 0 ${m} 0,${i} a ${n},${n} 0 ${m} 0,-${i}`,pathLength:u}},A=(t,s)=>t===0||t===s?0:typeof s=="number"?t-s:0,Y=t=>({position:"relative",width:t,height:t}),H={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"},L=(t,s,l,r,c)=>{if(r===0)return s;let n=(c?r-t:t)/r;return s+l*n},I=t=>{var s,l;return(l=(s=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(r,c,n,i)=>`#${c}${c}${n}${n}${i}${i}`).substring(1).match(/.{2}/g))==null?void 0:s.map(r=>parseInt(r,16)))!=null?l:[]},J=(t,s)=>{var l;let{colors:r,colorsTime:c,isSmoothColorTransition:n=!0}=t;if(typeof r=="string")return r;let i=(l=c==null?void 0:c.findIndex((h,y)=>h>=s&&s>=c[y+1]))!=null?l:-1;if(!c||i===-1)return r[0];if(!n)return r[i];let m=c[i]-s,u=c[i]-c[i+1],a=I(r[i]),_=I(r[i+1]),o=!!t.isGrowing;return`rgb(${a.map((h,y)=>L(m,h,_[y]-h,u,o)|0).join(",")})`},K=t=>{let{duration:s,initialRemainingTime:l,updateInterval:r,size:c=180,strokeWidth:n=12,trailStrokeWidth:i,isPlaying:m=!1,isGrowing:u=!1,rotation:a="clockwise",onComplete:_,onUpdate:o}=t,h=p.useRef(),y=Math.max(n,i??0),{path:k,pathLength:w}=O(c,y,a),{elapsedTime:N}=G({isPlaying:m,duration:s,startAt:A(s,l),updateInterval:r,onUpdate:typeof o=="function"?x=>{let g=Math.ceil(s-x);g!==h.current&&(h.current=g,o(g))}:void 0,onComplete:typeof _=="function"?x=>{var g;let{shouldRepeat:j,delay:E,newInitialRemainingTime:$}=(g=_(x))!=null?g:{};if(j)return{shouldRepeat:j,delay:E,newStartAt:A(s,$)}}:void 0}),v=s-N;return{elapsedTime:N,path:k,pathLength:w,remainingTime:Math.ceil(v),rotation:a,size:c,stroke:J(t,v),strokeDashoffset:L(N,0,w,s,u),strokeWidth:n}},P=t=>{let{children:s,strokeLinecap:l,trailColor:r,trailStrokeWidth:c}=t,{path:n,pathLength:i,stroke:m,strokeDashoffset:u,remainingTime:a,elapsedTime:_,size:o,strokeWidth:h}=K(t);return b.createElement("div",{style:Y(o)},b.createElement("svg",{viewBox:`0 0 ${o} ${o}`,width:o,height:o,xmlns:"http://www.w3.org/2000/svg"},b.createElement("path",{d:n,fill:"none",stroke:r??"#d9d9d9",strokeWidth:c??h}),b.createElement("path",{d:n,fill:"none",stroke:m,strokeLinecap:l??"round",strokeWidth:h,strokeDasharray:i,strokeDashoffset:u})),typeof s=="function"&&b.createElement("div",{style:H},s({remainingTime:a,elapsedTime:_,color:m})))};P.displayName="CountdownCircleTimer";const Q="_module_container_14pez_5",V="_left_side_14pez_11",X="_timer_14pez_17",Z="_play_14pez_23",ee="_calories_14pez_30",te="_calories_amount_14pez_36",se="_right_side_14pez_40",re="_gif_14pez_47",ne="_exercise_descr_14pez_53",ie="_exercise_div_14pez_59",ae="_type_14pez_70",ce="_type_descr_14pez_76",d={module_container:Q,left_side:V,timer:X,play:Z,calories:ee,calories_amount:te,right_side:se,gif:re,exercise_descr:ne,exercise_div:ie,type:ae,type_descr:ce},le=({exercise:t})=>{const[s,l]=p.useState(0),[r,c]=p.useState(0),[n,i]=p.useState(!1);p.useEffect(()=>{let a;return n?a=setInterval(()=>{l(_=>{const o=_+1;return console.log("duration",o),o===180&&(clearInterval(a),i(!1)),o})},1e3):clearInterval(a),()=>{clearInterval(a)}},[n,i]),p.useEffect(()=>{const a=(s/60*t.burnedCalories/3).toFixed();c(a)},[s]);const m=()=>{i(a=>!a)},u=a=>a.charAt(0).toUpperCase()+a.slice(1);return e.jsxs("div",{className:d.module_container,children:[e.jsxs("div",{className:d.left_side,children:[e.jsx("img",{className:d.gif,src:t.gifUrl,alt:"Exercise technique"}),e.jsxs("div",{className:d.timer,children:[e.jsx(P,{isPlaying:n,strokeWidth:4,duration:180,size:124,isGrowing:!0,rotation:"counterclockwise",colors:["#E6533C"],trailColor:["#323232"],children:({remainingTime:a})=>{const _=Math.floor(a/60),o=a%60;return`${String(_).padStart(2,"0")}:${String(o).padStart(2,"0")}`}}),!n&&e.jsx("svg",{className:d.play,onClick:m,children:e.jsx("use",{href:S+"#icon-play"})}),n&&e.jsx("svg",{className:d.play,onClick:m,children:e.jsx("use",{href:S+"#icon-pause-square"})}),e.jsxs("p",{className:d.calories,children:["Burned calories: ",e.jsx("span",{className:d.calories_amount,children:r})]})]})]}),e.jsxs("div",{className:d.right_side,children:[e.jsxs("div",{className:d.exercise_descr,children:[e.jsxs("div",{className:d.exercise_div,children:[e.jsx("p",{className:d.type,children:"Name"}),e.jsx("p",{className:d.type_descr,children:u(t.name)})]}),e.jsxs("div",{className:d.exercise_div,children:[e.jsx("p",{className:d.type,children:"Target"}),e.jsx("p",{className:d.type_descr,children:u(t.target)})]}),e.jsxs("div",{className:d.exercise_div,children:[e.jsx("p",{className:d.type,children:"Body Part"}),e.jsx("p",{className:d.type_descr,children:u(t.bodyPart)})]}),e.jsxs("div",{className:d.exercise_div,children:[e.jsx("p",{className:d.type,children:"Equipment"}),e.jsx("p",{className:d.type_descr,children:u(t.equipment)})]})]}),e.jsx(M,{btnType:"button",text:"Add to diary"})]})]})},oe="_container_1kxge_1",de="_pic_1kxge_10",ue="_welldone_1kxge_14",pe="_amount_container_1kxge_20",me="_text_1kxge_27",he="_amount_1kxge_20",_e="_links_1kxge_37",xe="_link_1kxge_37",fe="_svg_1kxge_51",f={container:oe,pic:de,welldone:ue,amount_container:pe,text:me,amount:he,links:_e,link:xe,svg:fe},ge="/power-pulse-front-end-react/assets/thumb_up-47cb592a.png",ye=()=>e.jsxs("div",{className:f.container,children:[e.jsx("img",{className:f.pic,src:ge,alt:"Well done"}),e.jsx("p",{className:f.welldone,children:"Well done"}),e.jsxs("div",{className:f.amount_container,children:[e.jsxs("p",{className:f.text,children:["Your time: ",e.jsx("span",{className:f.amount,children:"0"})]}),e.jsxs("p",{className:f.text,children:["Burned calories: ",e.jsx("span",{className:f.amount,children:"0"})]})]}),e.jsxs("div",{className:f.links,children:[e.jsx(M,{btnType:"button",text:"Next exercise"}),e.jsxs(W,{to:"/",className:f.link,children:["To the diary",e.jsx("svg",{className:f.svg,children:e.jsx("use",{href:S+"#icon-arrow-modal"})})]})]})]}),Ne=()=>{const t=q(),{exercises:s}=U();console.log(s);const[l,r]=p.useState(!1),[c,n]=p.useState(!1);p.useEffect(()=>{t(F())},[t]);const i=()=>{r(a=>!a)},m=()=>{n(a=>!a)},u={_id:"64f2458d6f67bc34bae4f813",bodyPart:"upper arms",equipment:"barbell",gifUrl:"https://ftp.goit.study/img/power-pulse/gifs/0038.gif",name:"barbell drag curl",target:"biceps",burnedCalories:84,time:3};return e.jsxs("div",{children:["Exercises",e.jsx("button",{type:"button",onClick:i,children:"TEST Open exercise"}),l&&e.jsx(z,{onClose:i,children:e.jsx(le,{exercise:u})}),e.jsx("button",{type:"button",onClick:m,children:"TEST Open exercise"}),c&&e.jsx(z,{onClose:m,children:e.jsx(ye,{exercise:u})})]})};export{Ne as default};
